/*! 
 * This is a jquery plugin for form validate
 * Author:Shifone
 * Website:http://www.cuishifeng.cn
 * Version:1.0.0 
 * Date:2014-04-20 
 * License:http://www.apache.org/licenses/LICENSE-2.0 
 */
!function(a){a.fn.extend({validate:function(b){var c={err_class:"error",messages:{},show_error:null,clear_error:null};b=a.extend({},c,b);var d=a.extend({},o(),b.messages),e=this;k();var f={},g=this.serializeArray(),h=e.find(":input[name]").map(function(){return this.name}).get(),i=p(),j=[];return a.each(i,function(a,b){j.push(a)}),a.each(b.rules,function(b,c){var d=null;a.each(g,function(a,c){return c.name===b?(d=c,!1):void 0}),null===d&&-1!==a.inArray(b,h)&&(d={name:b,value:n(b)}),null!==d&&a.each(c,function(b,c){a.each(c,function(b,g){"key"===b&&-1!==a.inArray(g,j)&&i[g].call(e,d.name,d.value,c.args)!==!0&&(f[d.name]=l(d.name,g,c))})})}),a.isEmptyObject(f)?!0:(a.isFunction(b.show_error)?b.show_error.call(this,f):m(),!1);function k(){if(null===b.show_error)e.find("."+b.err_class).html("");else{if(null===b.show_error||!a.isFunction(b.clear_error))throw new Error("Not hava clear error function");b.clear_error.call(e)}}function l(a,b,c){var e=d[b];return c.message&&(e=c.message),c.args&&(e=e.replace(new RegExp(":value","ig"),c.args)),f[a]?f[a]+","+e:e}function m(){a.each(f,function(c,d){var f=e.find('[name="'+c+'"]').parent(),g=f.find("."+b.err_class);g.length>0?g.html(d):a("<span>"+d+"</span>").addClass(b.err_class).appendTo(f)})}function n(a){var b=e.find('[name="'+a+'"]');return b.is('[type="checkbox"], [type="radio"]')?b.is(":checked")?b.val():null:b.val()}function o(){return{not_empty:"This field is required.",mobile:"Please enter a valid mobile number",min_length:"Please enter at least :value characters.",max_length:"Please enter no more than :value characters.",regex:"",email:"Please enter a valid email address.",url:"Please enter a valid URL.",exact_length:"Please enter exactly :value characters.",equals:"",ip:"",credit_card:"Please enter a valid credit card number.",alpha:"",alpha_numeric:"",alpha_dash:"",digit:"Please enter only digits.",numeric:"Please enter a valid number.",decimal:"Please enter a decimal number.",matches:"Must match the previous value."}}function p(){return{not_empty:function(b,c){return null!==c&&a.trim(c).length>0},mobile:function(b,c){var d=/^(13[0-9]|15[0|3|6|7|8|9]|18[0|6|8|9])\d{8}$/;return d.test(a.trim(c))},min_length:function(b,c,d){var e=a.trim(c).length,f=e>=d;return f},max_length:function(b,c,d){return a.trim(c).length<=d},regex:function(a,b,c){var d=new RegExp(c);return d.test(b)},email:function(b,c){var d=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;return d.test(a.trim(c))},url:function(a,b){var c=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;return c.test(b)},exact_length:function(b,c,d){var e=a.trim(c).length,f=e===d;return f},equals:function(a,b,c){return b===c},ip:function(b,c){var d=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i;return d.test(a.trim(c))},credit_card:function(a,b){if(/[^0-9 \-]+/.test(b))return!1;var c=0,d=0,e=!1;b=b.replace(/\D/g,"");for(var f=b.length-1;f>=0;f--){var g=b.charAt(f);d=parseInt(g,10),e&&(d*=2)>9&&(d-=9),c+=d,e=!e}return c%10===0},alpha:function(a,b){var c=/^[a-z]*$/i;return c.test(b)},alpha_numeric:function(a,b){var c=/^[a-z0-9]*$/i;return c.test(b)},alpha_dash:function(a,b){var c=/^[a-z0-9_\-]*$/i;return c.test(b)},digit:function(a,b){var c=/^\d*$/;return c.test(b)},numeric:function(a,b){var c=/^([\+\-]?[0-9]+(\.[0-9]+)?)?$/;return c.test(b)},decimal:function(a,b){var c=/^([\+\-]?[0-9]+(\.[0-9]+)?)?$/;return c.test(b)},matches:function(a,b,c){return b===e.find('[name="'+c+'"]').val()}}}}})}(jQuery);